<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Configurateur Audi R8 V10 - Arlu</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="configurateur.css" />
</head>
<body class="configurateur-page">

<header class="header-main">
  <a href="../index.html" class="logo-link">
    <img src="../logo.png" alt="Logo Arlu" class="logo-img"/>
  </a>
  <nav>
    <ul class="nav-list">
      <li><a href="../index.html">Accueil</a></li>
      <li><a href="../contact.html">Contact</a></li>
      <li><a href="../models.html">Mod√®les</a></li>
    </ul>
  </nav>
</header>

<main class="main-content configurateur-content">
  <div class="config-header">
    <h1 class="config-title">Configurez votre Audi R8 V10 Performance</h1>
    <div class="price-estime sticky-price">
      Prix estim√© : <span id="prix-estime">207‚ÄØ000</span> ‚Ç¨
    </div>
  </div>
  <form class="config-form" id="configForm" autocomplete="off" action="https://formspree.io/f/xyzpezng" method="POST">
    <section class="config-section">
      <h2>Couleur ext√©rieure</h2>
      <div class="config-options color-options" id="color-choices">
        <button type="button" class="color-btn active" style="background:#233a5e" data-value="bleu" title="Bleu sombre m√©tallis√©"></button>
        <button type="button" class="color-btn" style="background:#888c8e" data-value="gris" title="Gris Daytona"></button>
        <button type="button" class="color-btn" style="background:#18191a" data-value="noir" title="Noir Mythos"></button>
        <button type="button" class="color-btn" style="background:#a51c1c" data-value="rouge" title="Rouge Tango"></button>
        <input type="hidden" name="couleur" value="bleu">
      </div>
    </section>

    <h3>les vrai option du configurateur seront disponible dans la version finale</h3>

    <div class="actions actions-config">
      <button type="button" id="showDevisInfos" class="btn-primary btn-configure">Demander un devis personnalis√©</button>
      <a href="../models.html" class="btn-secondary">‚Üê Retour aux mod√®les</a>
    </div>
    
    <div class="construction-container">
        <div class="emoji">üöß</div>
        <h1>Page en construction</h1>
        <p>Nous travaillons actuellement sur cette page.</p>
    </div>
<script>
  // Mapping des valeurs pour le r√©sum√©
  const resumeLabels = {
    couleur: {
      bleu: 'Bleu sombre m√©tallis√© (Arlu Exclusive)',
      gris: 'Gris Daytona',
      noir: 'Noir Mythos',
      rouge: 'Rouge Tango'
    },
    jantes: {
      '20_arlu': '20" Arlu Forged Lightweight (noir mat)',
      '20_silver': '20" Forged Silver',
      '19_classic': '19" Classic Design'
    },
    interieur: {
      alcantara_bleu: 'Alcantara noir, surpiq√ªres bleues, carbone mat',
      cuir_rouge: 'Cuir noir & rouge, inserts aluminium',
      full_cuir: 'Full cuir noir, inserts carbone brillant'
    },
    echappement: {
      arlu_titanium: 'Arlu Titanium Sport‚Ñ¢ (valves actives)',
      origine: "√âchappement d'origine Audi Sport"
    },
    etriers: {
      rouge: 'Rouge',
      noir: 'Noir',
      jaune: 'Jaune'
    },
    inserts: {
      carbone_mat: 'Carbone mat',
      carbone_brillant: 'Carbone brillant',
      alu: 'Aluminium bross√©'
    },
    packcarbone: {
      non: 'Non',
      oui: 'Oui (+6‚ÄØ000‚ÄØ‚Ç¨)'
    },
    furtif: {
      non: 'Non',
      oui: 'Oui (+8‚ÄØ000‚ÄØ‚Ç¨)'
    },
    toit: {
      carbone: 'Carbone (+2‚ÄØ500‚ÄØ‚Ç¨)',
      noir: 'Noir brillant',
      carrosserie: 'Couleur carrosserie'
    },
    audio: {
      audi: 'Audi Standard',
      bose: 'Bang & Olufsen (+1‚ÄØ500‚ÄØ‚Ç¨)',
      arlu: 'Arlu Signature (+3‚ÄØ500‚ÄØ‚Ç¨)'
    }
  };

  // Prix de base et suppl√©ments r√©alistes
  const prixBase = 205500;
  const prixOptions = {
    couleur: { bleu: 0, gris: 0, noir: 0, rouge: 0 },
    jantes: { '20_arlu': 3200, '20_silver': 1800, '19_classic': 0 },
    interieur: { alcantara_bleu: 0, cuir_rouge: 1800, full_cuir: 2500 },
    echappement: { arlu_titanium: 4200, origine: 0 },
    etriers: { rouge: 0, noir: 0, jaune: 900 },
    inserts: { carbone_mat: 1200, carbone_brillant: 1500, alu: 0 },
    packcarbone: { non: 0, oui: 6500 },
    furtif: { non: 0, oui: 8500 },
    toit: { carbone: 3500, noir: 0, carrosserie: 0 },
    audio: { audi: 0, bose: 1700, arlu: 3900 }
  };

  function updateActiveBtns(groupId, value) {
    const group = document.getElementById(groupId);
    if (!group) return;
    group.querySelectorAll('.option-btn, .color-btn').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.value === value);
    });
    group.querySelector('input[type="hidden"]').value = value;
  }

  function updateSummaryAndPrice() {
    const form = document.querySelector('.config-form');
    const selections = {
      couleur: form.couleur.value,
      jantes: form.jantes.value,
      interieur: form.interieur.value,
      echappement: form.echappement.value,
      etriers: form.etriers.value,
      inserts: form.inserts.value,
      packcarbone: form.packcarbone.value,
      furtif: form.furtif.value,
      toit: form.toit.value,
      audio: form.audio.value
    };
    // R√©sum√©
    for (const key in selections) {
      const el = document.getElementById('summary-' + key);
      if (el && resumeLabels[key][selections[key]]) {
        el.textContent = resumeLabels[key][selections[key]];
      }
    }
    // Prix
    let prix = prixBase;
    for (const key in selections) {
      prix += prixOptions[key][selections[key]] || 0;
    }
    document.getElementById('prix-estime').textContent = prix.toLocaleString('fr-FR');
  }

  // Gestion des boutons custom (ajout du groupe furtif)
  document.querySelectorAll('.config-options').forEach(group => {
    group.querySelectorAll('.option-btn, .color-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        updateActiveBtns(group.id, btn.dataset.value);
        updateSummaryAndPrice();
      });
    });
  });

  // Init r√©sum√©/prix au chargement
  updateSummaryAndPrice();

  // Nouvelle fonction pour g√©n√©rer le mailto avec le r√©cap
  function getConfigMailBody(selections) {
    return (
      "Configuration Audi R8 V10 Performance\n" +
      "------------------------------------\n" +
      "Couleur : " + resumeLabels.couleur[selections.couleur] + "\n" +
      "Prix estim√© : " + document.getElementById('prix-estime').textContent + " ‚Ç¨"
    );
  }

  // Affichage dynamique du formulaire d'infos perso
  document.getElementById('showDevisInfos').onclick = function() {
    document.getElementById('devis-infos-popup').style.display = 'flex';
  };
  document.getElementById('closeDevisInfos').onclick = function() {
    document.getElementById('devis-infos-popup').style.display = 'none';
  };

  // Emp√™che la soumission directe du formulaire, sauf depuis le popup
  document.getElementById('configForm').addEventListener('submit', function(e) {
    // V√©rifie que le popup est affich√© (donc que les infos sont bien remplies)
    if (document.getElementById('devis-infos-popup').style.display !== 'flex') {
      e.preventDefault();
      document.getElementById('devis-infos-popup').style.display = 'flex';
      return false;
    }
    // V√©rification simple des champs requis
    var nom = document.getElementById('nom').value.trim();
    var email = document.getElementById('email').value.trim();
    if (!nom || !email) {
      alert('Merci de renseigner votre nom et votre email.');
      e.preventDefault();
      return false;
    }
    // G√©n√®re le message de config avant envoi
    const form = document.querySelector('.config-form');
    const selections = {
      couleur: form.couleur.value,
      jantes: form.jantes.value,
      interieur: form.interieur.value,
      echappement: form.echappement.value,
      etriers: form.etriers.value,
      inserts: form.inserts.value,
      packcarbone: form.packcarbone.value,
      furtif: form.furtif.value,
      toit: form.toit.value,
      audio: form.audio.value
    };
    document.getElementById('config-message').value = getConfigMailBody(selections);
    // Laisse le submit se faire normalement (Formspree)
  });
</script>
</body>
</html>




